<p id="notice"><%= notice %></p>

<h1>Messages</h1>

<table>
  <thead>
    <tr>
      <th>Content</th>
      <th>Media</th>
      <th>From</th>
      <th>By</th>
      <th>Recipients</th>
      <th>Recipient type</th>
      <th>Created</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @messages.each do |message| %>
      <tr>
        <td><%= message.content %></td>
        <td class="truncate"><%= message.media %></td>
        <td><%= message.sender_number %></td>
        <td><%= message.sender_name %></td>
        <td><%= message.recipients.map{|x|x["name"]}.compact.join(', ') %></td>
        <td><%= message.recipient_type %></td>
        <td><%= message.created_at.strftime("%B %d, %Y")  %></td>
        <td><%= link_to 'Show', message %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= paginate @messages  %>

<%= link_to 'New Message', new_message_path %>
